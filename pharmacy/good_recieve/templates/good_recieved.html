{% include "header.html" %}
{% load static %}
<body>
   

    <!--sub menu-->

    <div class="container margin padding  w100">

        <div class="row">
            

            <!--left nav bar start-->
            <div class="col-sm-2 pr0" style=" width: 1sww 5%;">


                <div class="menu">

                    <div class="side-bar2">

                        <div class="sideMenuTop">
                            <img class="logo" src="{%  static 'images/badas.png' %}" id="sidebar-logo">
                            <h4 id="logo-text">CT Health Medicine</h4>
                        </div>


                        <div class="item" style="margin-top: 15%;">
                            <ul class="sub-menu">
                                <!--<li>
                                    <a href="#"> </i>Dashboard</a>
                                </li>
                                <li>
                                    <a href="#" class="sub-item purchasereq1"
                                        id="purchasereq1">Purchase Requisition</a>
                                </li>
                                <li>
                                    <a href="#" class="sub-item stocktransferreq1"
                                        id="stocktransferreq1">Procurment Order</a>
                                </li>
                                <li>
                                    <a href="#" class="sub-item stocktransferreq1"
                                        id="stocktransferreq1">Purchase</a>
                                </li>-->
                                {% if request.session.role != '3'%}
                                <li style=" background-color: #004a88;">
                                    <a href=' {% url "gr_home" %}' class="sub-item stocktransferreq1"
                                        id="stocktransferreq1">Good Received</a>
                                </li>

                                
                                <li>
                                    <a href='{% url "in_home" %}' class="sub-item stocktransferreq1"
                                        id="stocktransferreq1">Inventory</a>
                                </li>

                                {% endif %}
                                {% if request.session.role == 'admin'%}
                                <li>
                                    <a href='{% url "registration" %}' class="sub-item stocktransferreq1"
                                        id="stocktransferreq1">Registration</a>
                                </li>
                                {% endif %}

                                {% if request.session.role != '1'%}
                                <li>
                                    <a href='{% url "sales" %}' class="sub-item stocktransferreq1"
                                        id="stocktransferreq1">Sales</a>
                                </li>
                                {% endif %}
                                
                                <li>
                                    <a href='{% url "logout" %}' class="sub-item stocktransferreq1"
                                        id="stocktransferreq1">Logout</a>
                                </li>
                            </ul>




                        </div>


                    </div>
                </div>
            </div>
            <!--left nav bar end-->

            <!--search bar, topnav & profile avatar-->

            <div class="col-sm-10 px-4" style="background-color: #002E55;">
               
                <form action="" id = "submitOrder">
                    {% csrf_token %}
                <!--Summary View-->
                    <div class="col-md-12 2" id="viewSummary">

                        
                    </div>
                </form>

               

                <!--Filter start-->
                <div>
                    <div id="filterBox" style="display: none;">
                        
                        <div class="modal-header">
                            <h3 class="modal-title" id="exampleModalLabel">FILTER</h3>
                            <button type="button" id = "XcloseFilterBox" class="btn-close btn-close-white" data-bs-dismiss="modal"
                                aria-label="Close"></button>
                        </div>

                        <div class="modal-body">
                            <form action="">

                                <div class="container margin padding w100">


                                    <div class="row">


                                        <div class="col-sm-6">
                                            <h5 class="modal-text">OUTLET NAME</h5>
                                            <select class="input-design4" id="purchaseReqFor" name="">

                                                </option>
                                                <option value="saab">Choose Outlet</option>
                                                <option value="fiat">BADAS Pharmacy (Keraniganj)</option>
                                                <option value="fiat">BADAS Pharmacy (IGH savar)</option>
                                                <option value="fiat">BADAS Pharmacy (Jurain)</option>
                                                <option value="fiat">BADAS Pharmacy (Mohammadpur)</option>
                                            </select>
                                            <h5 class="morebtn">Edit</h5>
                                        </div>

                                        <div class="col-sm-6">
                                            <h5 class="modal-text">DATE</h5>

                                            <input class="input-design2" type="text" id="demo" name="datefilter"
                                                value="">


                                        </div>

                                        

                                        <div class="row">

                                            <div class="col-sm-6">
                                                <h5 class="modal-text">COMPANY NAME</h5>
                                                <select class="input-design4" id="coId" name="">
                                                    <option></option>
                                                    {% for company in companies %}
                                                        <option value="{{company.id}}">{{company.companyName}}</option>
                                                    {% endfor %}

                                                </select>
                                                <h5 class="morebtn">Edit</h5>
                                            </div>


                                        </div>


                                        <div class="col-sm-6" >
                                            <h5 class="modal-text">PR ID</h5>
                                            <input type="text" name = "purchaseId" id = "purchaseId">
                                        </div>

                                        

                                    </div>
                            </form>
                        </div>

                        <div class="modal-footer">

                            <button type="button" id="filterpr" class="btn btn-primary"
                                style="background-color: #7dc855;">APPLY
                                FILTER</button>
                        </div>
                    </div>
                </div>
                <!--Filter end-->

                <!--Add product form start-->
                <form id = "submitMed">
                    {% csrf_token %}
                    <div class="row " id='purchaseMenu' style="display:none">
                        <div class="disable-select"><img id="loader"  style = "display:none;z-index: 10;position: fixed;top: 30%;left: 50%;width: 20%;" src="{%  static 'loader.gif' %}" alt="Proccessing....." /></div>

                        

                        <div class="col-md-6 px-2 w-50" style="padding: 3%;">

                            <div class="modal-header">
                                <div>
                                    <h5 class="modal-title" id="exampleModalLabel">Add Purchase Requisition</h5>
                                    <p>Product</p>
                                </div>
                                <button type="button" class="btn-close btn-close-white" id="closeAddProduct" data-bs-dismiss="modal"
                                    aria-label="Close"></button>
                            </div>

                            <div class="modal-body">
                                <form id = "submitOrder">

                                    <div class="container margin padding w100">

                                        <div class="row">

                                            <div class="col-sm-6">
                                                <h5 class="modal-text">REQUISITION DATE</h5>
                                                <input class="input-design4" type="date" id="requisition_Date" name="" value="{% now 'Y-m-d' %}" min ="{% now 'Y-m-d' %}" >
                                            </div>

                                            <div class="col-sm-6 px-2">
                                                <h5 class="modal-text">Store Name</h5>
                                                <!-- <select class="input-design4" id="purchaseReqForTemporary" name="purchaseReqcustomer"> -->
                                                <select class="input-design4" id="purchaseReqForTemporary" name="purchaseReqcustomer">

                                                    <!-- <option value=""></option>
                                                    {% for pharma in pharmacy %}
                                                        <option value="{{pharma.outlet}}_{{pharma.id}}_{{pharma.shortCode}}">{{pharma.outlet}}</option>
                                                    {% endfor %} -->
                                                    <option value="">BADAS Pharmacy BIRDEM 25th Counter</option>
                                                </select>
                                                <h5 class="morebtn">Edit</h5>
                                                <input class="input-design4 myInput " id="pharmacyID" name="pharmacyID"  value = "1" type="hidden">
                                                <input class="input-design4 myInput " id="shortCode" name="shortCode" value = "1122" type="hidden">
                                            </div>
                                        </div>

                                        <div class="row">



                                            <div class="col-sm-6">
                                                <h5 class="modal-text">Company Name</h5>
                                                <select class="input-design4" id="purchaseReqcustomer" >
                                                    <option value=""></option>
                                                    {% for company in companies %}
                                                        <option value="{{company.companyName}}{{company.id}}">{{company.companyName}}</option>
                                                    {% endfor %}
                                                    <!--<option>ACI Pharmacitical Company</option>
                                                    <option>SQUARE Pharmacitical Company</option>
                                                    <option>SKF Pharmacitical Company</option>
                                                    <option>Beximco Pharmacitical Company</option>
                                                    <option>Jayson Pharmacitical Company</option>
                                                    <option>ACME Pharmacitical Company</option>-->
                                                </select>
                                                <input class="input-design4 myInput " id="companyID" name="companyID" type="hidden">
                                            </div>


                                        </div>

                                        <br />

                                        <div class="row">

                                            <div class="col-sm-12">
                                                <h5 class="modal-text">ITEM</h5>
                                                <input class="input-design4 myInput " id="purchaseReqItem" name="" disabled>
                                                <input class="input-design4 myInput " id="purchaseReqItemprice" value = "0" name="" type = "hidden">
                                                <input class="input-design4 myInput " id="mrp" name="" type = "hidden" value = "0">
                                                <h5 class="morebtn">Add</h5>
                                            </div>
                                        </div>

                                        <div class="row gx-2">

                                            <div class="col-sm-6">
                                                <h5 class="modal-text">GENERIC NAME</h5>
                                                <select class="input-design4 myInput" id="genericName" name="genericName">

                                                    <option value=""></option>
                                                    {% for generic in generic_list %}
                                                    <option value="{{generic.name}}">{{generic.name}}</option>
                                                    {% endfor %}
                                                    
                                                </select>
                                            </div>
                                            

                                            <div class="col-sm-4">
                                                <h5 class="modal-text">UNIT Type</h5>
                                                <!--<input class="input-design4 myInput " id="" name="" value = "pcs" readonly>-->
                                                <select class="input-design4 myInput" id="purchaseReqUnit" name="">

                                                    <option value=""></option>
                                                    {% for unit in units %}
                                                    <option value="{{unit.unit}}">{{unit.unit}}</option>
                                                    {% endfor %}
                                                    
                                                </select>
                                            </div>

                                            <div class="col-sm-4 px-2">
                                                <h5 class="modal-text">QTY</h5>
                                                <input class="input-design4 myInput " id="purchaseReqPcs" type="number"
                                                    name="">
                                            </div>

                                            <div class="col-sm-2 px-2 py-3">
                                                <button type="button" class="btn btn-successs  addbtn" id="add" disabled>+</button>
                                            </div>
                                        </div>

                                        <br>

                                        <div class="row" id="remarkBox">

                                            <div class="col-sm-2">
                                                <h5 class="modal-text row-cols-md-auto">REMARKS</h5>
                                            </div>

                                            <div class="col-sm-8">
                                                <textarea id="myTextarea"
                                                    style="background-color: #ffffff00; border-color: #ffffff;" rows="6"
                                                    cols="45"></textarea>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>


                            <div id="addedMedicineList">

                            </div>




                        </div>

                        

                    

                        <div class="col-md-6 2" style="padding-top: 3%;">

                            <div class="modal-header">
                                <h5 class="modal-title" id="exampleModalLabel">Summary</h5>
                            </div>

                            <div class="modal-body">
                                

                                    <div class="row">

                                        <div class="col-sm-6">
                                            <h5 class="modal-text">DATE:</h5>
                                            <span id="requisitionDatetemporary">{% now "Y-m-d" %}</span>
                                        </div>

                                        <div class="col-sm-6">
                                            <h5 class="modal-text" id="reqClient">STORE NAME :</h5>
                                            <span id="requisitionFortemporary">BADAS Pharmacy BIRDEM 25th Counter</span>
                                        </div>
                                    </div>

                                    <br />


                                    <div class="row ">

                                        <div class="col-sm-6">
                                            <h5 class="modal-text">Company Name :</h5>
                                            <span id="requisitionReceivertemporary"></span>
                                        </div>


                                    </div>


                                    <table class="table">
                                        <thead class="tbodyresult3">
                                            <tr>
                                                <th scope="col">SL</th>
                                                <th scope="col">ITEM</th>
                                                <th scope="col">QTY</th>
                                                <th scope="col">ACTION</th>
                                                <th scope="col">BUYING PRICE</th>
                                                <th scope="col">SUB TOTAL</th>
                                            </tr>
                                        </thead>


                                        <tbody id="addTemporaryTable">
                                        </tbody>


                                    </table>

                                    <div>
                                        <p scope="col"> TOTAL : <span id="totalValue"></span></p>
                                        <input class="input-design4 myInput " id="totalValueInput" name="totalValue" type="hidden">
                                    </div>


                                    <div class="row " id="rBox">


                                        <div class="col-sm-6">
                                            <h5 class="modal-text" id="reqClient">Remark:</h5>



                                            <div class="col-sm-10">
                                                <textarea id="targetElement"
                                                    style="background-color: #ffffff00; border: none;" rows="6"
                                                    cols="60"></textarea>
                                            </div>
                                        </div>
                                    </div>



                                
                            </div>
                        </div>

                        
                        
                    </div>
                </form>
                <!--Add product form end-->

                <!--edit product form start-->
                <form id = "editMed">
                    {% csrf_token %}
                    <div class="row " id='editpurchaseMenu' style="display:none">
                        <div class="disable-select"><img id="loader"  style = "display:none;z-index: 10;position: fixed;top: 30%;left: 50%;width: 20%;" src="{%  static 'loader.gif' %}" alt="Proccessing....." /></div>

                        

                        <div class="col-md-6 px-2 w-50" style="padding: 3%;">

                            <div class="modal-header">
                                <div>
                                    <h5 class="modal-title" id="exampleModalLabel">Edit Purchase Requisition</h5>
                                </div>
                                <button type="button" class="btn-close btn-close-white" id="closeAddProduct" data-bs-dismiss="modal"
                                    aria-label="Close"></button>
                            </div>

                            <div class="modal-body">

                                    <div class="container margin padding w100">

                                        <div class="row">

                                            <div class="col-sm-6">
                                                <h5 class="modal-text">REQUISITION DATE</h5>
                                                <input class="input-design4" type="date" id="requisition_Date" name="" value="{% now 'Y-m-d' %}" min ="{% now 'Y-m-d' %}" >
                                            </div>

                                            <div class="col-sm-6 px-2">
                                                <h5 class="modal-text">Store Name</h5>
                                                <!-- <select class="input-design4" id="purchaseReqForTemporary" name="purchaseReqcustomer"> -->
                                                <select class="input-design4" id="purchaseReqForTemporary" name="purchaseReqcustomer">

                                                    <!-- <option value=""></option>
                                                    {% for pharma in pharmacy %}
                                                        <option value="{{pharma.outlet}}_{{pharma.id}}_{{pharma.shortCode}}">{{pharma.outlet}}</option>
                                                    {% endfor %} -->
                                                    <option value="">BADAS Pharmacy BIRDEM 25th Counter</option>
                                                </select>
                                                <h5 class="morebtn">Edit</h5>
                                                <input class="input-design4 myInput " id="pharmacyID" name="pharmacyID"  value = "1" type="hidden">
                                                <input class="input-design4 myInput " id="shortCode" name="shortCode" value = "1122" type="hidden">
                                            </div>
                                        </div>

                                        <div class="row">



                                            <div class="col-sm-6">
                                                <h5 class="modal-text">Company Name</h5>
                                                <select class="input-design4" id="purchaseReqcustomer" >
                                                    <option value=""></option>
                                                    {% for company in companies %}
                                                        <option value="{{company.companyName}}{{company.id}}">{{company.companyName}}</option>
                                                    {% endfor %}
                                                    <!--<option>ACI Pharmacitical Company</option>
                                                    <option>SQUARE Pharmacitical Company</option>
                                                    <option>SKF Pharmacitical Company</option>
                                                    <option>Beximco Pharmacitical Company</option>
                                                    <option>Jayson Pharmacitical Company</option>
                                                    <option>ACME Pharmacitical Company</option>-->
                                                </select>
                                                <input class="input-design4 myInput " id="companyID" name="companyID" type="hidden">
                                            </div>


                                        </div>

                                        <br />

                                        <div class="row">

                                            <div class="col-sm-12">
                                                <h5 class="modal-text">ITEM</h5>
                                                <input class="input-design4 myInput " id="purchaseReqItem" name="" disabled>
                                                <input class="input-design4 myInput " id="purchaseReqItemprice" value = "0" name="" type = "hidden">
                                                <input class="input-design4 myInput " id="mrp" name="" type = "hidden" value = "0">
                                                <h5 class="morebtn">Add</h5>
                                            </div>
                                        </div>

                                        <div class="row gx-2">

                                            <div class="col-sm-6">
                                                <h5 class="modal-text">GENERIC NAME</h5>
                                                <select class="input-design4 myInput" id="genericName" name="genericName">

                                                    <option value=""></option>
                                                    {% for generic in generic_list %}
                                                    <option value="{{generic.name}}">{{generic.name}}</option>
                                                    {% endfor %}
                                                    
                                                </select>
                                            </div>
                                            

                                            <div class="col-sm-4">
                                                <h5 class="modal-text">UNIT Type</h5>
                                                <!--<input class="input-design4 myInput " id="" name="" value = "pcs" readonly>-->
                                                <select class="input-design4 myInput" id="purchaseReqUnit" name="">

                                                    <option value=""></option>
                                                    {% for unit in units %}
                                                    <option value="{{unit.unit}}">{{unit.unit}}</option>
                                                    {% endfor %}
                                                    
                                                </select>
                                            </div>

                                            <div class="col-sm-4 px-2">
                                                <h5 class="modal-text">QTY</h5>
                                                <input class="input-design4 myInput " id="purchaseReqPcs" type="number"
                                                    name="">
                                            </div>

                                            <div class="col-sm-2 px-2 py-3">
                                                <button type="button" class="btn btn-successs  addbtn" id="add" disabled>+</button>
                                            </div>
                                        </div>

                                        <br>

                                        <div class="row" id="remarkBox">

                                            <div class="col-sm-2">
                                                <h5 class="modal-text row-cols-md-auto">REMARKS</h5>
                                            </div>

                                            <div class="col-sm-8">
                                                <textarea id="myTextarea"
                                                    style="background-color: #ffffff00; border-color: #ffffff;" rows="6"
                                                    cols="45"></textarea>
                                            </div>
                                        </div>
                                    </div>
                                
                            </div>


                            <div id="addedMedicineList">

                            </div>




                        </div>

                        

                    

                        <div class="col-md-6 2" style="padding-top: 3%;">

                            <div class="modal-header">
                                <h5 class="modal-title" id="exampleModalLabel">Summary</h5>
                            </div>

                            <div class="modal-body">
                                

                                    <div class="row">

                                        <div class="col-sm-6">
                                            <h5 class="modal-text">DATE:</h5>
                                            <span id="requisitionDatetemporary">{% now "Y-m-d" %}</span>
                                        </div>

                                        <div class="col-sm-6">
                                            <h5 class="modal-text" id="reqClient">STORE NAME :</h5>
                                            <span id="requisitionFortemporary">BADAS Pharmacy BIRDEM 25th Counter</span>
                                        </div>
                                    </div>

                                    <br />


                                    <div class="row ">

                                        <div class="col-sm-6">
                                            <h5 class="modal-text">Company Name :</h5>
                                            <span id="requisitionReceivertemporary"></span>
                                        </div>


                                    </div>


                                    <table class="table">
                                        <thead class="tbodyresult3">
                                            <tr>
                                                <th scope="col">SL</th>
                                                <th scope="col">ITEM</th>
                                                <th scope="col">QTY</th>
                                                <th scope="col">ACTION</th>
                                                <th scope="col">BUYING PRICE</th>
                                                <th scope="col">SUB TOTAL</th>
                                            </tr>
                                        </thead>


                                        <tbody id="addTemporaryTable">
                                        </tbody>


                                    </table>

                                    <div>
                                        <p scope="col"> TOTAL : <span id="totalValue"></span></p>
                                        <input class="input-design4 myInput " id="totalValueInput" name="totalValue" type="hidden">
                                    </div>


                                    <div class="row " id="rBox">


                                        <div class="col-sm-6">
                                            <h5 class="modal-text" id="reqClient">Remark:</h5>



                                            <div class="col-sm-10">
                                                <textarea id="targetElement"
                                                    style="background-color: #ffffff00; border: none;" rows="6"
                                                    cols="60"></textarea>
                                            </div>
                                        </div>
                                    </div>



                                
                            </div>
                        </div>

                        
                        
                    </div>
                </form>
                <!--edit product form end-->
                 
                

                <div class="procure_purchase-tab"  style="background-color: #200303; padding-left: 5px;padding-top: 1%; margin-top: 2%;"> 
              
                    <!--USER PANEL-->
                    <div class="sc">
                       
                        <h6 class="topnav2 ib">Requisition</h6>

                        <div class="buttonbox">
                            {% if request.session.role == 'admin' or request.session.role == '4' %}
                                <button class="fa fa-search buttons" href="#Search" type="button" data-bs-toggle="modal"
                                    data-bs-target="#exampleModal2"></button>
                                <button class="fa-solid fa-filter buttons" id = "filterButton"></button>
                                <button class="fa-solid fa-print buttons" type="button" data-bs-toggle="modal"
                                    data-bs-target="#exampleModal3"></button>
                                <button class="fa-solid fa-download buttons" href="#Download"></button>
                            {% endif %}
                            <button class="fa-sharp fa-solid fa-plus buttons" id = "tab"></button>
                        </div>
                    </div>
                    {% if request.session.role == 'admin' or request.session.role == '4' %}
                        <table class="table">
                            <thead style="background-color: #003E6C; font-size: small;">
                                <tr>

                                    <th scope="col">SL</th>
                                    <th scope="col">COMPANY</th>
                                    <th scope="col">PR ID</th>
                                    <th scope="col">PO ID</th>
                                    <th scope="col">Purchase ID</th>
                                    <th scope="col">Amount in Taka</th>
                                    <th scope="col">CHECK Detail</th>

                                </tr>
                            </thead>

                            <tbody style="background-color: #154883" id="purchaseTable">
                                {%  for list in orderlist %}
                                    
                                    
                                <tr>

                                    <th scope="col">{{ forloop.counter }}</th>
                                    <th scope="col">{{list.company_id.companyName}}</th>
                                    <th scope="col">{{list.pr_id}}</th>
                                    <th scope="col">{{list.po_id}}</th>
                                    <th scope="col">{{list.purchase_id}}</th>
                                    <th scope="col"> {{list.amount}}</th>
                                    <th scope="col">

                                        <button class=" buttons viewEvent" value = "{{list.id}}"
                                            style="color: #000000;background-color:#fafbfc; border: none;" type="button"
                                            id="viewEvent" class="btn btn-info" data-bs-dismiss="modal">Details</button>
                                            
                                        <input type="hidden" value = "{{list.company_id.id}}">
                                        <input type="hidden" value = "{{list.outlet_id}}">
                                        <a href ="{% url 'rePdf'%}?reid={{list.id}}"><i class="fa-solid fa-file-pdf "  style = 'font-size: 40px;margin-left: 7%;'></i></a>
                                        <button class=" buttons editEvent" value = "{{list.id}}"
                                            style="color: #000000;background-color:#fafbfc; border: none;" type="button"
                                             class="btn btn-info" data-bs-dismiss="modal">Edit</button>
                                    </th>
                                </tr>
                                {% endfor %}

                            </tbody>
                        </table>

                        <div class="pagination">
                            <span class="step-links">
                              {% if orderlist.has_previous %}
                              <a href="?page=1">&laquo; first</a>
                              <a href="?page={{ orderlist.previous_page_number }}">previous</a>
                              {% endif %}
                          
                              <span class="current">
                                Page {{ orderlist.number }} of {{ orderlist.paginator.num_pages }}
                              </span>
                          
                              {% if orderlist.has_next %}
                              <a href="?page={{ orderlist.next_page_number }}">next</a>
                              <a href="?page={{ orderlist.paginator.num_pages }}">last &raquo;</a>
                              {% endif %}
                            </span>
                        </div>
                    {% endif %}
                </div>

                


                <!--Search-->
                <div class="modal fade" id="exampleModal2" tabindex="-1" aria-labelledby="exampleModalLabel"
                    aria-hidden="true">

                    <div class="modal-dialog">

                        <div class="modal-content">
                            <!--Filter-->
                            <div class="modal-header">
                                <h3 class="modal-title" id="exampleModalLabel">SEARCH</h3>
                                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                                    aria-label="Close"></button>
                            </div>

                            <div class="modal-body">
                                <form action="">

                                    <div class="container margin padding w50">


                                        <div class="row">



                                            <div class="col-sm-6">
                                                <h5 class="modal-text">SELECT OPTIONS</h5>
                                                <select class="input-design4" id="purchaseReqFor" name="">

                                                    </option>
                                                    <option value="saab"></option>
                                                    <option value="fiat">PO ID</option>
                                                    <option value="fiat">PR ID</option>
                                                    <option value="fiat">PURCHASE ID</option>

                                                </select>

                                            </div>
                                        </div>

                                        

                                        <div class="row">



                                            <div class="col-sm-6">
                                                <input type="text" name="" id="" style="width: 100%;">
                                            </div>

                                        </div>

                                        

                                    </div>
                                </form>
                            </div>

                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" style="  color: #000000;  border-color: transparent;
                                background-color: #e1e8ee;">CANCEL FILTER</button>
                                <button type="button" class="btn btn-primary" style="background-color: #7dc855;">APPLY
                                    FILTER</button>
                            </div>
                        </div>
                    </div>
                </div>
                
            </div>

        </div>
    </div>

        <!--Summary-->
       

        <!--toggle function on sub menus-->





        <script type="text/javascript">
                $(document).ready(function(){


                    $(document).on('click', '#filterpr', () => {


                        var val = $('#demo').val();
                        var coId = $('#coId').val();
                        var purchaseId = $('#purchaseId').val();
                        var datepicker = $('#demo').data('daterangepicker');
                        var startDate = datepicker.startDate;
                        var endDate = datepicker.endDate;


                        //console.log(startDate)

                        if (startDate.isSame(endDate, 'day')) {

                            var newDateFormat , mainDateFormat

                            //$('#goodReceivedTable').show(1000);
                            //$('#filterBox').hide(1000);
                            if (startDate._i.indexOf('/') > -1)
                            {   
                                let date = startDate._i.split("/");

                                onedayAdd = parseInt(date[1]) + 1
                                if(onedayAdd < 10){
                                    onedayAdd = '0' + onedayAdd
                                }
                                mainDateFormat =  date[2]+"-"+date[0]+"-"+date[1]
                                newDateFormat = date[2]+"-"+date[0]+"-"+onedayAdd
                                console.log(mainDateFormat)
                            }else{
                                let date = $('#demo').val();
                                let splitDate = date.split(" ");
                                let firstdate = splitDate[0].split("/");
                                onedayAdd = parseInt(firstdate[1]) + 1
                                if(onedayAdd < 10){
                                    onedayAdd = '0' + onedayAdd
                                }
                                mainDateFormat =  firstdate[2]+"-"+firstdate[0]+"-"+firstdate[1]
                                newDateFormat =  firstdate[2]+"-"+firstdate[0]+"-"+onedayAdd
                                console.log(newDateFormat)
                            }


                        } else {
                            //$('#filterBox').hide(1000);
                            //$('#csvContent').show(1000)
                            alert('Date Range under development')
                        }
                    });


                    $("#submitMed").validate({
                        
                        rules:{
                            // pass:{
                            //     required: true,
                            // },
                        },
                        messages:{
                            // pass:{
                            //     required: true,
                            // },
                        },
                        submitHandler : function () {
                            $('#loader').show();
                            // your function if, validate is success
                            $.ajax({
                                type : "POST",
                                url : '{% url "save_requisition" %}',
                                data : $('#submitMed').serialize(),
                                dataType : "json",
                                success : function (data) {
                                    console.log(data);
                                    $('#loader').hide();
                                    window.location.reload();
                                }
                            });
                        }
                    });

                    $("#submitOrder").validate({
                        
                        rules:{
                            // pass:{
                            //     required: true,
                            // },
                        },
                        messages:{
                            // pass:{
                            //     required: true,
                            // },
                        },
                        submitHandler : function () {
                            $('#loader').show();
                            // your function if, validate is success
                            $.ajax({
                                type : "POST",
                                url : '{% url "insert_inventory" %}',
                                data : $('#submitOrder').serialize(),
                                dataType : "json",
                                success : function (data) {
                                    console.log(data);
                                    $('#loader').hide();
                                    window.location.reload();
                                }
                            });
                        }
                    });
                });
        </script>
        <script>
            //search product 
            var valueCompanyId;
            $( function() {
                
                // $( "#purchaseReqItem" ).autocomplete({
                // //source: ['Ace' , 'Ace plus', 'napa', 'napa extend']
                //     source: function( request, response ) {
                //         $.ajax({
                //         type: "GET",
                //         url: '{% url "get_med" %}',
                //         dataType: "json",
                //         //data: {q: request.term},
                //         data: 'q=' + request.term+ '&coId=' + valueCompanyId,
                //         beforeSend: function() {
                //                 //$("#purchaseReqItem").css("background", "#FFF url(LoaderIcon.gif) no-repeat 165px");
                //             },
                //         success: function( data ) {

                //             if(data.length > 0){
                //                 response(data);
                //             }else{
                //                 response(['No Med found']);
                //                 //console.log(data);
                //             }
                //             //console.log(data);
                //         }
                //         });
                //     }
                // });
            } );
            //purchase requisition form-->

            $(document).ready(() => {

                // $("#purchaseReqItem").on('blur' , function(){
                //    // alert('hello');
                //    let med_name = $('#purchaseReqItem').val();
                //    let new_name = med_name.replace(/ /g, "_");
                //    //console.log(med_name);
                //    $.ajax({
                //         type: "GET",
                //         url: '{% url "get_med_price" %}',
                //         dataType: "json",
                //         data: 'med=' + new_name,
                //         success: function( data ) {

                //             //response(data);
                            
                //             //console.log(data.fields.buying_price);
                //             $('#purchaseReqItemprice').val(data.fields.buying_price)
                //             $('#mrp').val(data.fields.selling_price)
                //         }
                //     });
                // });
                

                $('#targetEvents').hide()

                $('.sub-btn').click(function () {
                    $(this).next('.sub-menu').slideToggle();
                    $(this).find('.dropdown').toggleClass('rotate');
                });

                //hide
                $('#viewSummary').hide()
                //$('#goodReceivedTable').hide()

                // requsition pdf
                // $(document).on('click', '#rePDF', function() {
                //     let reid = $('#reid').val()
                //     alert(reid)

                //     $.ajax({
                //         type: "GET",
                //         url: '{% url "rePdf" %}',
                //         dataType: "json",
                //         data: 'reid=' + reid,
                //         success: function( data ) {
                //             console.log(data)

                //         }
                //     });

                // })
                //summary

                //edit order 
                $(document).on('click', '.editEvent', function() {
                    let value = $(this).val();

                    $.ajax({
                        type: "GET",
                        url: '{% url "edit_requisition" %}',
                        dataType: "json",
                        data: 'reId=' + value,
                        success: function( data ) {
                            console.log(data)

                        }
                    });

                    $('#editpurchaseMenu').show(1000)
                });


                //new order 
                $(document).on('click', '.viewEvent', function() {

                    let value = $(this).val();
                    let comId = $(this).next('input').val();
                    let outlet = $(this).next('input').next('input').val();
                    //alert(value);
                    //$('#goodReceivedTable').hide(1000)

                    $.ajax({
                        type: "GET",
                        url: '{% url "get_ordered" %}',
                        dataType: "json",
                        data: 'reqid=' + value+'&comId='+comId+'&outlet='+outlet,
                        success: function( data ) {

                            //response(data);
                            
                            console.log(data);
                            let  date = data.orderlist.fields.create_date.split(".");
                            let med = data.orderMed

                            var viewdetails = `<div class="modal-header">
                                            <h5 class="modal-title" id="exampleModalLabel">Summary</h5>
                                            <button type="button" class="btn-close btn-close-white" id="Xclose" data-bs-dismiss="modal"
                                                aria-label="Close"></button>
                                        </div>

                                        <div class="modal-body">
                                            

                                                <div class="row">

                                                    <div class="col-sm-6">
                                                        <h5 class="modal-text">DATE: <span id="requisitionDate">${date[0].replace(/T/g, " ") }<span>
                                                        </h5>

                                                    </div>

                                                    <div class="col-sm-6">
                                                        <h5 class="modal-text">OUTLET : <span id="">${data.pharmacy.fields.outlet}</span></h5>

                                                    </div>


                                                </div>

                                                <br />

                                                <div class="row ">


                                                    <div class="col-sm-4">
                                                        <h5 class="modal-text">PO ID : ${data.orderlist.fields.po_id} <span id="requisitionReceiver"></span>
                                                        </h5>

                                                        <input type="hidden" name = "poid" value="${data.orderlist.fields.po_id}" readonly>
                                                    </div>


                                                    <div class="col-sm-4">
                                                        <h5 class="modal-text" id="reqClient">PR ID : ${data.orderlist.fields.pr_id}
                                                            <span id="requisitionFor"> </span>
                                                        </h5>
                                                        <input type="hidden" name = "prid" value="${data.orderlist.fields.pr_id}" readonly>
                                                    </div>

                                                    <br /> <br />
                                                    <div class="col-sm-4">
                                                        <h5 class="modal-text" id="reqClient">PURCHASE ID : ${data.orderlist.fields.purchase_id}<span
                                                                id="requisitionDepartment"> </span></h5>
                                                                <input type="hidden" name = "purchase_id" value="${data.orderlist.fields.purchase_id}" readonly>
                                                    </div>

                                                    <div class="col-sm-4">
                                                        <h5 class="modal-text">COMPANY NAME : <span id="requisitionReceiver">${data.company.fields.companyName}</span>
                                                            <input type="hidden" name = "reid" id = "reid" value="${data.reid}" readonly>
                                                            <input type="hidden" name = "coid" value="${data.orderlist.fields.company_id}" readonly>
                                                            <input type="hidden" name = "amount" value="${data.orderlist.fields.amount}" readonly>
                                                            <input type="hidden" name = "outlet_id" value="${data.orderlist.fields.outlet_id}" readonly>
                                                            <input type="hidden" name = "outlet_shortcode" value="${data.orderlist.fields.outlet_shortcode}" readonly>
                                                            <input type="hidden" name = "company_shortcode" value="${data.company.fields.shortCode}" readonly>
                                                        </h5>

                                                    </div>

                                                    <div class="col-sm-4 input-group" style = "width : 50%">
                                                        <h5 class="modal-text mr-2" id="basic-addon3" style = "    margin-right: 2%;">Invoice</h5>
                                                        <input type="text" name = "voucher" class="" id="voucher" >
                                                    </div>
                                                    <div class="col-sm-4 input-group" style = "width : 50%">
                                                        
                                                    </div>
                                                </div>

                                                <table class="table">
                                                    <thead class="tbodyresult3">
                                                        <tr>
                                                            <th scope="col">SL</th>
                                                            <th scope="col">ITEM</th>
                                                            <th scope="col">QTY</th>
                                                            <th scope="col">TP (per unit)</th>
                                                            
                                                            <th scope="col">Total Trade Price</th>
                                                            <th scope="col">VAT Percent</th>
                                                            <th scope="col">Total Price</th>
                                                            <th scope="col">Expired Date</th>

                                                        </tr>
                                                    </thead>

                                                <tbody id="addTable">`
                                                    const datee = new Date()
                                                    
                                                    let currentdate = datee.toJSON()

                                                    //console.log(currentdate.slice(0,10))

                                            med.forEach(function (element, i) {

                                                let quantity = 0;
                                                let accept = 0;
                                                if(element.fields.accept){
                                                    quantity = parseInt(element.fields.quantity) - parseInt(element.fields.accept)
                                                    accept = element.fields.accept
                                                }else{
                                                    quantity = parseInt(element.fields.quantity)

                                                }

                                                let total = quantity * parseFloat(element.fields.buying_price)
                                                
                                                let totalVat = total + (total * 17.4) / 100
                                                
                                                    viewdetails = viewdetails +     `<tr class="summaryItem">
                                                                            <td>${i}
                                                                                <input type="hidden" name = "med_array[]" value="${i}" readonly>
                                                                                </td>
                                                                            <td class='item' > ${element.fields.med_name}
                                                                                <input type="hidden" name ="med${i}" value="${element.fields.med_name}" readonly></td>
                                                                            <td>
                                                                                
                                                                                <input type="number" name = "quantity${i}" value="${quantity}" class="qty" min = "0">
                                                                                <input type="hidden"  value="${quantity}" readonly>
                                                                                <input type="hidden" name = "inserted${i}" value="${accept}" readonly>
                                                                                <input type="hidden" name = "actualQuantity${i}" value="${element.fields.quantity}" readonly>
                                                                                <span class="qty">${element.fields.unit}</span> 
                                                                                <input type="hidden" name = "unit${i}" value="${element.fields.unit}" readonly>
                                                                                <input type="hidden" name = "generic${i}" value="${element.fields.generic}" readonly>
                                                                            </td>
                                                                            <td>
                                                                                <input type="number" name = "buying${i}" value="${element.fields.buying_price}" class="trade">
                                                                                <input type="hidden" name = "selling${i}" value="${element.fields.selling_price}" readonly >
                                                                            </td>
                                                                               
                                                                            <td>
                                                                                <span class="totalTrade">${total.toFixed(2)}</span>
                                                                                <input type="hidden" name = "totalTrade${i}" value="${total.toFixed(2)}" readonly >
                                                                            </td>
                                                                            <td><span class="vat">17.4</span> %</td>
                                                                            <td class='item'>
                                                                                <span class="totalPrice">${totalVat.toFixed(2)}</span>
                                                                                <input type="hidden" name = "totalPrice${i}" value="${totalVat.toFixed(2)}" readonly >
                                                                            </td>

                                                                            <td class='item'>
                                                                                <input type="date" class = 'inDate' name = "inDate${i}" min = "${currentdate.slice(0,10)}">
                                                                            </td>

                                                                        </tr>`
                                                                        //console.log(element)
                                                            
                                                
                                            });
                                        
                                        viewdetails = viewdetails +       `
                                                    </tbody>
                                                </table>

                                            
                                            <div class="modal-footer" id="buttonShow">
                                                <button type="submit" id="submitEvent" class="btn  btn-primary inSubmit" disabled >Submit</button>
                                            </div>
                                        </div>`

                            $('#viewSummary').html(viewdetails);
                            $('#viewSummary').show(1000)
                            
                        }
                    });

                    
                })

                $(document).on('change', '.inDate', function() {
                    let voucher = $('#voucher').val();
                    if(voucher){
                        $('.inSubmit').prop('disabled', false);
                    }else{
                         $(this).val(null);
                         alert('Please Insert a invoice number to submit')
                    }
                    //alert('sds')
                });

                $(document).on('change', '.qty', function() {
                    let qty = $(this).val();
                    let highestqty = $(this).next().val();

                    if(parseInt(qty) > parseInt(highestqty)){
                        alert('Value more than '+highestqty+' is not allowed');
                        $(this).val(highestqty)
                    }else if(parseInt(qty) < 0 ){
                        alert('Negative is not allowed')
                        $(this).val(highestqty)
                    }else{
                        let vat = $(this).parent().next().next().next().children('.vat').text();
                        let price = $(this).parent().next().children('input').val();

                        let total = parseFloat(price) * parseFloat(qty);
                        let totalVat = total + (total * vat )/ 100

                        $(this).parent().next().next().children('.totalTrade').text(total.toFixed(2));
                        $(this).parent().next().next().children('input').val(total.toFixed(2));
                        $(this).parent().next().next().next().next().children('.totalPrice').text(totalVat.toFixed(2));
                        $(this).parent().next().next().next().next().children('input').val(totalVat.toFixed(2));
                        //alert(price);
                    }

                   

                });


                $(document).on('change', '.trade', function() {
                    let price = $(this).val();
                    let qty = $(this).parent().prev().children('input').val();
                    let vat = $(this).parent().next().next().children('.vat').text();

                    let total = parseFloat(price) * parseFloat(qty);

                    let totalVat = total + (total * vat )/ 100
                    $(this).parent().next().children('.totalTrade').text(total.toFixed(2));
                    $(this).parent().next().children('input').val(total.toFixed(2));
                    $(this).parent().next().next().next().children('.totalPrice').text(totalVat.toFixed(2));
                    $(this).parent().next().next().next().children('input').val(totalVat.toFixed(2));
                    //alert(vat);
                });

                $(document).on('click', '#filterButton', () => {
                    $('#filterBox').toggle(1000)
                    $('#purchaseMenu').hide(500)
                })

                //menu X Close
                $(document).on('click', '#Xclose', () => {
                    $('#viewSummary').hide(1000)
                    //$('#goodReceivedTable').show(1000)

                })

                $(document).on('click', '#XcloseFilterBox', () => {
                    $('#filterBox').hide(1000)
                    //$('#goodReceivedTable').show(1000)

                })


                //filter

                $(document).on('click', '#filterGoodReceived', () => {
                    //$('#goodReceivedTable').show(1000)
                    var formatedDate1;
                    var formatedDate2;
                    $('#filterBox').hide(1000);
                    const date = $("#demo").val();
                    var len = date.length;


                    var firstHalf = date.substring(0, len / 2);
                    var secondHalf = date.substring(len / 2);

                    firstHalf = firstHalf.trim();
                    secondHalf = secondHalf.substr(2, 10);
                    daterangeStatus = 'unset'

                    if(firstHalf === secondHalf ){
                        let month = firstHalf.substr(0, 2)
                        let day = firstHalf.substr(3, 2)
                        let year = firstHalf.substr(6, 4)

                        formatedDate1 = year +'-'+month+'-'+day;
                        daterangeStatus = 'same'
                        console.log('same date');
                    }else{

                        let month = firstHalf.substr(0, 2)
                        let day = firstHalf.substr(3, 2)
                        let year = firstHalf.substr(6, 4)

                        let month2 = secondHalf.substr(0, 2)
                        let day2 = secondHalf.substr(3, 2)
                        let year2 = secondHalf.substr(6, 4)

                        formatedDate1 = year +'-'+month+'-'+day;
                        formatedDate2 = year2 +'-'+month2+'-'+day2;
                        daterangeStatus = 'different'

                        console.log('date range');
                    }

                    if (daterangeStatus == 'same'){
                        $.ajax({
                            type: "GET",
                            url: '{% url "gr_filter" %}',
                            dataType: "json",
                            data: 'status=' + daterangeStatus+'&date1='+formatedDate1+'&date2='+null,
                            success: function( data ) {

                                console.log(data);
                                // if (data.length >0){
                                //     console.log(data);
                                //     data.forEach(function (element, i) {

                                //     });
                                // }else{
                                //     alert('No data found on selected date')
                                // }
                                
                                //console.log(data.fields.buying_price);
                                
                            }
                        });
                    }else if(daterangeStatus == 'different') {
                        alert('Date range is under development')
                    }
                    //console.log(formatedDate1);
                    //console.log(formatedDate2);

                })


                //good recieve form open
                $(document).on('click', '#tab', () => {

                var pMenu = $('#purchaseMenu')
               $('#filterBox').hide(500)
                pMenu.toggle(500)
                })
                //good recieve form close
                $(document).on('click', '#closeAddProduct', () => {
                    $('#purchaseMenu').hide(1000)
                    //$('#goodReceivedTable').show(1000)

                })

                //add good recieve date / store name/ company name
                $(document).on('change', '#requisition_Date', () => {
                    const reqDate = $("#requisition_Date").val()

                    $('#requisitionDatetemporary').text(reqDate)

                })

                $(document).on('change', '#purchaseReqForTemporary', () => {
                    const storeName = $("#purchaseReqForTemporary").val()
                    const storeInfo = storeName.split("_");
                    $('#requisitionFortemporary').text(storeInfo[0])
                    $('#pharmacyID').val(storeInfo[1])
                    $('#shortCode').val(storeInfo[2])

                })

                $(document).on('change', '#purchaseReqcustomer', () => {
                    const companyNameId = $("#purchaseReqcustomer").val()
                    const outlet = $("#purchaseReqForTemporary").val()
                    if(companyNameId == "" ){
                        $('#purchaseReqItem').prop('disabled', true);
                        $('#purchaseReqItem').val(null);
                        $('#requisitionReceivertemporary').text(null)
                    }else if(companyNameId !== "" ){
                        const companyId = companyNameId.match(/\d+/);
                        $("#companyID").val(companyId[0]);

                        valueCompanyId = companyId[0];
                        $('#purchaseReqItem').prop('disabled', false);
                        //console.log(value);

                        const companyName = companyNameId.replace(companyId[0],'');

                        $('#requisitionReceivertemporary').text(companyName)
                    }
                    
                })

                
                //add product to list

                let itemList = []; // Initialize itemList and row variables here
                let row = 0;

                // Function to calculate and update the total sum of subtotals
                let updateTotalSum = () => {
                    let sum = 0;
                    $('.subTotal').each(function () {
                        sum += parseFloat($(this).text());
                    });
                    console.log(sum);

                    $('#totalValue').text(sum.toFixed(2));
                    $('#totalValueInput').val(sum.toFixed(2));
                }

                $(document).on('click', '#add', () => {

                    // Item
                    const rePurchaseReqItem = $("#purchaseReqItem").val();
                    // Unit
                    const reqPurchaseUnit = $("#purchaseReqUnit").val();
                    // Quantity
                    const purchaseQty = $("#purchaseReqPcs").val();
                    // Generic Name
                    const genericName = $("#genericName").val();

                    // Buying price
                    let buyingPrice = $('#purchaseReqItemprice').val();

                    // Selling price
                    let sellingPrice = $('#mrp').val();

                    // Subtotal
                    let subTotal = buyingPrice * purchaseQty;

                    if (rePurchaseReqItem == '') {
                    alert('Fill up the Item Field');
                    } else if (reqPurchaseUnit == '') {
                        alert('Fill up the Unit field');
                    } else if (purchaseQty == '') {
                        alert('Fill up the Quantity Field');
                    }else if (rePurchaseReqItem !== '' && purchaseQty !== '' && reqPurchaseUnit !== '') {
                        if (itemList.indexOf(rePurchaseReqItem) === -1) {
                            itemList.push(rePurchaseReqItem);
                            var detail = `
                            <tr class="ccc">
                                <th scope="row" >${row + 1}</th>
                                <input type="hidden" name ="med_array[]" value = "${row}">
                                <td class='item ' >${rePurchaseReqItem}</td>
                                <input type="hidden" name ="item${row}" value = "${rePurchaseReqItem}">
                                <td id='quantity'>${purchaseQty} ${reqPurchaseUnit}</td>
                                <input type="hidden" name ="quantity${row}" value = "${purchaseQty}">
                                <input type="hidden" name ="generic${row}" value = "${genericName}">
                                <input type="hidden" name ="unit${row}" value = "${reqPurchaseUnit}">
                                <td>
                                    <button type="button" id="openBtn" class="itemRemoveTemporary btn btn-danger btn-sm creditdelete">
                                        Delete
                                    </button>
                                </td>
                                <td id='item'>${buyingPrice}</td>
                                <input type="hidden" name ="price${row}" value = "${buyingPrice}">
                                <input type="hidden" name ="mrp${row}" value = "${sellingPrice}">
                                <td class='subTotal'>${subTotal.toFixed(2)}</td>
                                <input type="hidden" name ="total${row}" value = "${subTotal.toFixed(2)}">
                            </tr>`;

                            $('#addTemporaryTable').append(detail);

                            // Clear the input field
                            $("#purchaseReqItem").val('');
                            $("#purchaseReqUnit").val('');
                            $("#purchaseReqPcs").val('');
                            $("#reqPurchaseUnit").val('');
                            $("#genericName").val('');
                            $('#add').prop('disabled', true);
                            
                            
                            row++;

                            // Update the total sum
                            updateTotalSum();

                            //append submit
                            if(itemList.length === 1){
                                $('#addedMedicineList').append(
                                    ` <div class="modal-footer" id="buttonShow">
                                        <!--<button type="button" id="holdEvent" class="btn  btn-secondary" data-bs-dismiss="modal">On Hold</button>-->
                                        <button type="submit" id="submitEvent" class="btn  btn-primary" >Submit</button>
                                    </div>`
                                );
                                $('#purchaseReqcustomer').prop('disabled', true);
                                $('#purchaseReqForTemporary').prop('disabled', true);
                                //console.log('submit appended');
                            }
                        }else {
                            alert('Already Exists');
                            console.log(itemList);
                        }
                    }
                })

                // Disable the button initially        

                //$('#add').prop('disabled', true);

                $(document).on('input', '#purchaseReqItem, #purchaseReqUnit, #purchaseReqPcs,#genericName', () => {
                    const rePurchaseReqItem = $("#purchaseReqItem").val();
                    const reqPurchaseUnit = $("#purchaseReqUnit").val();
                    const purchaseQty = $("#purchaseReqPcs").val();
                    const genericName = $("#genericName").val();

                    if (rePurchaseReqItem !== '' && reqPurchaseUnit !== '' && purchaseQty !== '' ) {
                        $('#add').prop('disabled', false); // Enable the button
                    } else {
                        $('#add').prop('disabled', true); // Disable the button
                    }
                });

                // Initial calculation of the total sum when the page loads
                updateTotalSum();


                ///Items Delete

                $(document).on('click', '.itemRemoveTemporary', function () {
                    var removedItem = $(this).closest('tr').find('td.item').text();
                    var subTotal = $(this).closest('tr').find('td.subTotal').text();
                    itemList = itemList.filter(item => item !== removedItem);
                    $(this).closest('tr').remove();
                    //amountDelete()
                    console.log('Item name ',removedItem);
                    //console.log(itemList);
                    let sums = Number($('#totalValue').text());

                    var newtotal = parseFloat(sums) - parseFloat(subTotal);
                    $('#totalValue').text(newtotal.toFixed(2));
                    $('#totalValueInput').val(newtotal.toFixed(2));

                    if(itemList.length === 0){
                        $('#addedMedicineList').empty();
                        $('#purchaseReqcustomer').prop('disabled', false);
                        $('#purchaseReqForTemporary').prop('disabled', false);
                        
                    }

                });

                //remarks
                $("#myTextarea").on("keyup input", function () {
                    $('#rBox').show()
                    var textareaValue = $(this).val();
                    $("#targetElement").text(textareaValue);
                });

                


                //calender

                var date = new Date();
                const yyyy = date.getFullYear();
                let mm = date.getMonth() + 1; // Months start at 0!
                let dd = date.getDate() ;

                if (dd < 10) dd = '0' + dd;
                if (mm < 10) mm = '0' + mm;

                const formattedToday = mm + '/' + dd + '/' + yyyy;

                $('#demo').daterangepicker({
                    "timePickerSeconds": true,
                    "autoApply": true,
                    showCustomRangeLabel: false,
                    "maxSpan": {
                        "days": 30
                    },
                    ranges: {
                        'Today': [moment(), moment()],
                        'Yesterday': [moment().subtract(1, 'days'), moment().subtract(1, 'days')],
                        'Last 7 Days': [moment().subtract(6, 'days'), moment()],
                        'Last 30 Days': [moment().subtract(29, 'days'), moment()],
                        'This Month': [moment().startOf('month'), moment().endOf('month')],
                        'Last Month': [moment().subtract(1, 'month').startOf('month'), moment().subtract(1, 'month').endOf('month')],

                    },
                    locale: {
                        format: "MM/DD/YYYY",
                        separator: " - ",
                        applyLabel: "Apply",
                        cancelLabel: "Cancel",
                        fromLabel: "From",
                        toLabel: "To",
                        customRangeLabel: "Custom",
                        weekLabel: "W",
                        daysOfWeek: [
                            "Su",
                            "Mo",
                            "Tu",
                            "We",
                            "Th",
                            "Fr",
                            "Sa"
                        ],
                        monthNames: [
                            "January",
                            "February",
                            "March",
                            "April",
                            "May",
                            "June",
                            "July",
                            "August",
                            "September",
                            "October",
                            "November",
                            "December"
                        ],
                        "firstDay": 1
                    },
                    "alwaysShowCalendars": true,
                    //"startDate": "07/20/2023",
                    "startDate": formattedToday,
                    //"endDate": "07/26/2023"
                    "endDate": formattedToday

                });
                //css
                $('.daterangepicker ').css('background-color', 'black')


            });

            window.addEventListener('pageshow', (event) => {
            if (event.persisted) {
                //console.log('This page was restored from the bfcache.');
                location.reload(true);
            } else {
                //console.log('This page was loaded normally.');
            }
            });


        </script>


</body>

</html>



